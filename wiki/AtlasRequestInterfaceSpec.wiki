= INCF Atlas Server Request Interface =

== Base URIs ==

The Atlas base URIs identify the server location (URL) and the server application or context.

 * Format

    http://[server]:[port]/atlas-[hub]

 * Example:

    http://incf-dev-local:8080/atlas-aba

== Full URIs == 

The URIs will be consistent with, but a subset of, the OGC (Open Geospatial Consortium) WPS (Web Processing Service) standard. 

A complete URI will consist of 

 * a base URI
 * a query string consisting of
   * service (mandatory)
   * version (not for GetCapabilities, otherwise mandatory)
   * Request (mandatory)
   * Identifier (mandatory if Request is Execute, not used otherwise)
   * Data inputs (mandatory where specified)

The Request is mandatory the other query string elements depend on the type of Request.

For example:
 * http://incf-dev-local.crbs.ucd.edu/atlas-aba?service=WPS&request=GetCapabilities
 * http://incf-dev-local.crbs.ucd.edu/atlas-aba?
service=WPS&version=1.0.0&request=DescribeProcess
 * http://incf-dev-local.crbs.ucd.edu/atlas-aba?
service=WPS&version=1.0.0&request=Execute&identifier=GetGenesByPOI&dataInputs=srsCode=WHS;x=263.7;y=159.4;z=227.8

== Query String Details ==

Full URI = Base URI + Query String

?request={request}&identifier={identifier}&dataInputs={data-inputs}

Request = { GetCapabilities | DescribeProcess | Execute }

Identifier = { function-name }

DataInputs={key-1}={value-1};{key-2}={value-2};...;{key-n}={value-n}

DataInuts keys:
 * srsName, inputSrsName, targetSrsName = { Mouse_ABAreference_1.0 | Mouse_ABAvoxel_1.0 | Mouse_AGEA_1.0 | Mouse_EMAP-T26_1.0 | Mouse_Paxinos_1.0 | Mouse_WHS_1.0 }
 * sourceType = { WMS }
 * x, y, z, xmin, xmax, ymin, ymax = { double }
 * vocabulary = { { hub } : { srs | vocabulary } : { code } }
 * filter = { maptype:coronal | maptype:horizontal | maptype:sagittal | structureset:anatomic | structureset:fine }

== Summary of Atlas Functions ==

This table summarizes the planned set of Atlas requests.

<table style="color:black; background-color:#ffffcc;" cellpadding="5" cellspacing="0" border="1">
  <tr>
    <th>Request</th>
    <th>Identifier</th>
    <th>DataInputs<br/>(keys)</th>
    <th>Hub<br/>Applicability</th>
    <th>Expected<br/>Output</th>
  </tr>
  <tr>
    <td>!GetCapabilities</td>
    <td>n/a</td>
    <td>n/a</td>
    <td>Central and<br/>all hubs</td>
    <td>XML specified by:<br/>wpsGetCapabilities_response.xsd</td>
  </tr>
  <tr>
    <td>!DescribeProcess</td>
    <td>n/a</td>
    <td>n/a</td>
    <td>Central and<br/>all hubs</td>
    <td>XML specified by:<br/>wpsDescribeProcess_response.xsd</td>
  </tr>
  <tr>
    <td>Execute</td>
    <td>DescribeSRS</td>
    <td>srsName</td>
    <td>ABA<br/>UCSD</td>
    <td>XML</td>
  </tr>
  <tr>
    <td>Execute</td>
    <td>ListSRSs</td>
    <td>n/a</td>
    <td>ABA<br/>UCSD</td>
    <td>XML</td>
  </tr>
  <tr>
    <td>Execute</td>
    <td>!DescribeTransformation</td>
    <td>TBD</td>
    <td>ABA<br/>UCSD</td>
    <td>XML</td>
  </tr>
  <tr>
    <td>Execute</td>
    <td>!ListTransformations</td>
    <td>TBD</td>
    <td>ABA<br/>UCSD</td>
    <td>XML</td>
  </tr>
  <tr>
    <td>Execute</td>
    <td>TransformPOI</td>
    <td>inputSrsName<br/>targetSrsName<br/>x<br/>y<br/>z<br/>filter</td>
    <td>ABA<br/>UCSD</td>
    <td>XML</td>
  </tr>
  <tr>
    <td>Execute</td>
    <td>!GetTransformationChain</td>
    <td>inputSrsName<br/>targetSrsName<br/>filter</td>
    <td>Central<br/>ABA<br/>UCSD</td>
    <td>XML</td>
  </tr>
  <tr>
    <td>Execute</td>
    <td>Get2DImagesByPOI</td>
    <td>srsName<br/>x<br/>y<br/>z<br/>filter</td>
    <td>ABA<br/>UCSD</td>
    <td>XML</td>
  </tr>
  <tr>
    <td>Execute</td>
    <td>Get2DImagesByURI</td>
    <td>srsName<br/>filter</td>
    <td>UCSD</td>
    <td>XML</td>
  </tr>
  <tr>
    <td>Execute</td>
    <td>GetCorrelationMapByPOI</td>
    <td>srsName<br/>x<br/>y<br/>z<br/>filter</td>
    <td>ABA only</td>
    <td>XML</td>
  </tr>
  <tr>
    <td>Execute</td>
    <td>GetGenesByPOI</td>
    <td>srsName<br/>x<br/>y<br/>z<br/></td>
    <td>ABA<br/>EMAGE</td>
    <td>XML</td>
  </tr>
  <tr>
    <td>Execute</td>
    <td>GetStructureNamesByPOI</td>
    <td>srsName<br/>x<br/>y<br/>z<br/>vocabulary<br/>filter</td>
    <td>ABA<br/>UCSD</td>
    <td>XML</td>
  </tr>
  <tr>
    <td>Execute</td>
    <td>Retrieve2DImageByPOI</td>
    <td>sourceType<br/>sourceURL<br/>srsName<br/>xmin<br/>xmax<br/>ymin<br/>ymax<br/>
filter</td>
    <td>ABA<br/>UCSD</td>
    <td>XML root element:<br/>Retrieve2DImageResponse</td>
  </tr>
  <tr>
    <td>Execute</td>
    <td>GetCellsByURI</td>
    <td>?</td>
    <td>UCSD</td>
    <td>XML</td>
  </tr>
  <tr>
    <td>Execute</td>
    <td>GetCellsByPOI</td>
    <td>?</td>
    <td>UCSD</td>
    <td>XML</td>
  </tr>
</table>


<table style="color:black; background-color:#ffffcc;" cellpadding="5" cellspacing="0" border="1">
  <tr>
    <th colspan="2">!GetCapabilities</th>
  </tr>
  <tr>
    <th>GET<br/>Request</th>
    <td>http://[host]/[hub]$service=WPS&request=GetCapabilities</td>
  </tr>
  <tr>
    <th>Data Inputs</th>
    <td>None</td>
  </tr>
  <tr>
    <th>Normal<br/>Return</th>
    <td>XML document. [http://schemas.opengis.net/wps/1.0.0/wpsGetCapabilities_response.xsd WPS Schema].</td>
  </tr>
  <tr>
    <th>Error<br/>Return</th>
    <td>XML exception report. [http://schemas.opengis.net/ows/0.3.0/owsExceptionReport.xsd OWS Schema].</td>
  </tr>
  <tr>
    <th>Example</th>
    <td>http://incf-dev-local.crbs.ucsd.edu:8080/atlas-aba?service=WPS&request=GetCapabilities</td>
  </tr>
</table>

<table style="color:black; background-color:#ffffcc;" cellpadding="5" cellspacing="0" border="1">
  <tr>
    <th colspan="2">!DescribeProcess</th>
  </tr>
  <tr>
    <th>GET<br/>Request</th>
    <td>[protocol]://[host:[port]/[hub]$service=WPS&version=1.0.0&request=DescribeProcess]</td>
  </tr>
  <tr>
    <th>Data Inputs</th>
    <td>None</td>
  </tr>
  <tr>
    <th>Normal<br/>Return</th>
    <td>XML document. [http://schemas.opengis.net/wps/1.0.0/wpsDescribeProcess_response.xsd WPS Schema].</td>
  </tr>
  <tr>
    <th>Error<br/>Return</th>
    <td>XML exception report. [http://schemas.opengis.net/ows/0.3.0/owsExceptionReport.xsd OWS Schema].</td>
  </tr>
  <tr>
    <th>Example</th>
    <td>http://incf-dev-local.crbs.ucsd.edu:8080/atlas-aba?service=WPS&request=GetCapabilities</td>
  </tr>
</table>